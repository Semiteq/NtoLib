# Библиотека NtoLib

Библиотека пользовательских функциональных блоков и инфраструктуры для **MasterSCADA 3.12** (.NET Framework 4.8), используется на установках эпитаксии, плазмохимии и смежных системах.

## Модули и документация

### ConfigLoader

Функциональный блок загрузки/сохранения именованных настроек оборудования (заслонки, источники, нагреватели, вода, газовые линии) из YAML‑файла конфигурации.

- Документация: [`ConfigLoader`](../Docs/ConfigLoader.md)

### TrendPensManager

Функциональный блок автоматизации настройки трендов: добавляет перья на графики на основе структуры сервисов под `DataRootPath` и имён из ConfigLoader, с автоматическим применением стиля отображения "ступенькой".

- Документация: [`TrendPensManager`](../Docs/TrendPensManager.md)

### Таблица рецептов MBE (MbeTable)

Функциональный блок для конфигурации, редактирования и исполнения технологических рецептов в MasterSCADA.

- Документация на блок: [`MbeTable`](../Docs/MbeTable/readme.md)
- Модули блоков:
    - Конфигурация через YAML: [`01-config`](../Docs/MbeTable/01-config.md)
    - Работа с пинами SCADA: [`02-infrastructure`](../Docs/MbeTable/02-infrastructure.md)
    - UI/UX и взаимодействие: [`03-presentation`](../Docs/MbeTable/03-presentation.md)
    - Импорт/экспорт CSV: [`04-csv`](../Docs/MbeTable/04-csv.md)
    - Взаимодействие с ПЛК по Modbus TCP: [`05-modbus-tcp`](../Docs/MbeTable/05-modbus-tcp.md)
    - Диагностика и логирование: [`06-logger`](../Docs/MbeTable/06-logger.md)

### BrokenLinksObserver

Функциональный блок поиска оборванных связей между пинами в дереве объектов. Используется для быстрой диагностики проектов перед релизом: находит пины с отсутствующими источниками/приёмниками и помогает не возить в инсталляцию "битые" схемы.

### ClockGenerator

Функциональный блок инкремента по времени. Формирует программный таймер для шаговых/циклических операций, где требуется надёжный счётчик времени, отвязанный от конкретного контроллера.

### PumpFB

Визуальный функциональный блок для отображения и управления насосами. Даёт типовой HMI‑виджет с индикацией состояния, аварий и базовыми командами пуска/остановки.

### ValveFB

Визуальный функциональный блок для отображения и управления клапанами и шиберами. Используется как стандартный элемент интерфейса для байпасов, запорных и регулирующих органов с типовым набором состояний.

### TexBoxFloatFB и TextBoxIntFB

Визуальные функциональные блоки для контроля ввода пользовательских числовых данных с ограничением Min/Max. Обеспечивают проверку диапазонов и формата ввода прямо на уровне блока.

### SpectrometerFB

Невизуальный функциональный блок для работы со спектрометром ATP2000P. Инкапсулирует протокол обмена и выдаёт в SCADA уже разобранные/нормализованные данные измерений.

## Известные ограничения платформы

Подробности: [`Docs/KnownIssues`](../Docs/KnownIssues/)

- В легаси FB **нельзя** менять неймспейс и типы пинов блоков, уже присутствующих в старых проектах (MasterSCADA кэширует объекты).
- Рекомендуется всё что возможно помечать как `[NonSerialized]`.

---

Более подробную документацию по разработке блоков под MasterScada 3.12 можно найти в отдельном [репозитории](https://github.com/Semiteq/MasterScada3Wiki).
