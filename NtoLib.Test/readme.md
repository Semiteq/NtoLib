# Тестирование поведения

Что нужно проверить:

## Кнопки

- Кнопка "Add After" добавляет строку после текущей.
- Кнопка "Add Before" добавляет строку перед текущей.
- Кнопка "Delete" удаляет текущую строку.
- Кнопка "Open" открывает окно выбора для загрузки.
- Кнопка "Save" открывает окно для выбора пути сохранения файла.
- Кнопка "Send" отправляет рецепт в контроллер.

- Пустой рецепт нельзя сохранить или отправить.
- Невалидный рецепт нельзя сохранить или отправить.

## Действия 

- Выбор любого действия из списка создает ожидаемую строку с заблокированными/разблокированными ячейками.
- Изменения значений в ячейках правильно форматируются и применяются. Т.е передаются в контроллер и сохраняются в CSV.
- Значения в ячейках форматируются согласно конфигурации, становятся целыми, где ожидается целое, принимают экспоненциальную форму и пр. 
- Ячейки валидируют MIN/MAX значения, отрицательные положительные.
- Ячейки всегда содержат значения по умолчанию при создании новой строки.
- Ячейки не принимают или отбрасывают невалидные значения (например буквы там, где они не ожидаются).
- Ячейки времени правильно парсят введенные значения (hh:mm:ss или sss).
- Изменения связанных ячеек (например времени или повторений) вызывает обновление связанных ячеек в момент применения.

## CSV

- Загрузка CSV файла правильно парсит и отображает строки в таблице.
- Сохранение в CSV файл правильно сохраняет текущие строки, заголовки хэш и метаполя.
- Несовпадение хэша тела рецепта и сохраненного хэша выводит предупреждение и загружает файл.

## ModbusTCP

- Рецепт читается автоматически при переходе на экран, если контроллер доступен.
- Если в контроллере нет рецепта, выводится предупреждение. Окно рецепта пустое.
- В процессе отправки кнопки блокируются.
- Загружается ожидаемое количество строк рецепта.
- При отправке рецепта и закрытии/открытии рецепта отображается ожидаемый рецепт, который был отправлен.
- Значения в прочитанном из контроллера рецепте совпадают с отправленными значениями.
- В контроллере рецепт пишется в ожидаемые области памяти.

## Исполнение

- Во время `RecipeActive` можно только сохранить рецепт. Остальные кнопки заблокированы. Таблица `readonly`.
- Нельзя отправить рецепт если пин `EnaSend` равен `false`.
- При вводе `CurrentLine` окрашивается текущая строка и пройденные строки согласно выбранным цветам.
- Таймер работает правильно на линейном рецепте и в цикле.
- При переходе на экран рецепта, когда выполняется рецепт, рецепт должен корректно загрузиться и отобразить текущий прогресс. 